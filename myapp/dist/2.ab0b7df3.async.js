(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{hXn9:function(e,a,t){"use strict";var r=t("TqRt");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("miYZ");var n=r(t("tsqr")),s=r(t("o0o1")),l=r(t("MVZn")),i=r(t("GCcM")),u=t("7Qib"),c=r(t("LvDl")),f=r(t("wd/R")),d=r(t("usdK")),o=t("U47r"),p=t("S7Jb"),m={query:{},dataList:{},farmLogList:[]};function h(e){var a={title:"\u519c\u573a\u56fe\u7247",item:[]};return e["imgList"].map(e=>{a["item"].push({content:e.typeDesc,imgUrl:[e.imgUrl]})}),a}function w(e,a){e.detailsInfo.map((e,t)=>{Object.keys(a).map(t=>{"farmer"===t&&Object.keys(a["farmer"]).map(e=>{var t=a["farmer"][e];a[`farmer_${e}`]="birthday"===e?t?(0,f.default)(new Date(parseInt(t,10))).format("YYYY-MM-DD"):"":t}),e["item"].map((e,r)=>{e["key"]===t&&(e["content"]=a[t])})})})}function y(e,a){var t={},r={1:e=>{var a=h(e);t=c.default.cloneDeep(o.detailsSchema),t["detailsInfo"].splice(3,0,a)},2:()=>{t=c.default.cloneDeep(p.ownerDetailsSchema),t["detailsInfo"]}};return r[e](a),w(t,a),t}var v=u.Model.extend({namespace:"farmDetails",state:(0,l.default)({},c.default.cloneDeep(m)),subscriptions:{setup(e){var a=e.dispatch,t=e.listen;t("/farmInfo/details",e=>{a({type:"farmDetail",payload:e.query}),a({type:"restState"})})}},effects:{farmDetail:s.default.mark(function e(a,t){var r,n,l,u,c,f,d,o;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.callback,t.call,t.put,t.select,t.callWithMessage,n=t.update,l=t.callWithSpinning,u=r.id,c=r.isSale,e.next=5,l("1"===String(c)?i.default.getfarmDetail:i.default.getFarmOwnerDetail,{farmId:u});case 5:if(f=e.sent,!f){e.next=11;break}return d=y(c,f),o=f.farmLogList.map((e,a)=>{return e.key=a,e}),e.next=11,n({dataList:d,farmLogList:o,query:r});case 11:case"end":return e.stop()}},e,this)}),noPassModelOk:s.default.mark(function e(a,t){var r,l,u,c,f,o;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,a.callback,t.call,t.put,l=t.select,t.callWithMessage,t.update,u=t.callWithConfirmLoading,e.next=4,l(e=>e.farmDetails);case 4:return c=e.sent,f=c.query.id,o=r.failReason,e.next=9,u(i.default.auditFarm,{farmId:f,auditStatus:30,failReason:o});case 9:n.default.success("\u66f4\u65b0\u6210\u529f"),d.default.push("/farmInfo");case 11:case"end":return e.stop()}},e,this)}),passModelOk:s.default.mark(function e(a,t){var r,l,u,c;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a.payload,a.callback,t.call,t.put,r=t.select,t.callWithMessage,l=t.callWithConfirmLoading,e.next=4,r(e=>e.farmDetails);case 4:return u=e.sent,c=u.query.id,e.next=8,l(i.default.auditFarm,{farmId:c,auditStatus:20});case 8:n.default.success("\u5ba1\u6838\u6210\u529f"),d.default.push("/farmInfo");case 10:case"end":return e.stop()}},e,this)}),confirmUpdate:s.default.mark(function e(a,t){var r,l,u,c;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a.payload,a.callback,t.call,t.put,r=t.select,t.callWithMessage,t.update,l=t.callWithSpinning,e.next=4,r(e=>e.farmDetails);case 4:return u=e.sent,c=u.query.id,e.next=8,l(i.default.confirmUpdate,{farmId:c});case 8:n.default.success("\u786e\u8ba4\u4fee\u6539\u6210\u529f"),d.default.push("/farmInfo");case 10:case"end":return e.stop()}},e,this)})},reducers:{restState(e,a){return(0,l.default)({},e,m)}}});a.default=v}}]);