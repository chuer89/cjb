(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[41],{xuoW:function(e,a,t){"use strict";var r=t("TqRt");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("IzEo");var n=r(t("bx4M")),o=r(t("q1tI")),i=t("Kvkj"),s=r(t("wd/R")),d=t("HNlL"),l=t("MuoO");function m(e){var a=e.queryCondition,t=e.config,r=e.title,n={},o=a.findIndex((e,a,t)=>e.title===r);return o>-1&&Object.assign(n,a[o]["componentsConfig"],t),a[o]["componentsConfig"]=n,{queryCondition:a,index:o}}class u extends o.default.Component{constructor(e){super(e),this.onSave=(e=>{var a=e.site,t=e.purchaseTime,r=e.iLng,n=e.iLat,o="",i="",d="",l=window.AMap,m=["gps","baidu","mapbar"];a.length>2&&(d=a[2]),o=a[0],i=a[1];var u=e.ownerUserId,c=e.farmName,p=e.area,h=e.type,f=e.totalRmb,v=e.address,F=e.translateStatus;t=(0,s.default)(t,10).format("YYYY-MM-DD"),2!==parseInt(F)?l.convertFrom([r,n],m[parseInt(F)],(e,a)=>{if("ok"===a.info){var r=a.locations,n=r[0],s=n.lng,l=n.lat;this.actions.saveFarms({ownerUserId:u,farmName:c,area:p,type:h,totalRmb:f,purchaseTime:t,nationId:o,provinceId:i,cityId:d,address:v,lng:s,lat:l})}}):this.actions.saveFarms({ownerUserId:u,farmName:c,area:p,type:h,totalRmb:f,purchaseTime:t,nationId:o,provinceId:i,cityId:d,address:v,lng:r,lat:n})}),this.handleFarmersSearch=(e=>{var a;a&&(clearTimeout(a),a=null),a=setTimeout(()=>{this.actions.getFarms({mobileOrUserId:e})},300)}),this.handleFarmersChange=(e=>this.actions.updateFarms(e)),this.actions=this.props.actions}render(){var e=d.itemConfig.queryCondition,a=this.props.addFarm,t=a.farmers,r=a.farmersInputValue,s={showSearch:!0,onSearch:this.handleFarmersSearch,onChange:this.handleFarmersChange,notFoundContent:null,placeholder:"\u8bf7\u9009\u62e9\u519c\u573a\u4e3b"},l=m({queryCondition:e,config:s,title:"ownerUserId"}),u=l.index;return e[u].selectCondition=t,e[u].itemConfig.initialValue=r,o.default.createElement(o.default.Fragment,null,o.default.createElement(n.default,{title:"\u57fa\u7840\u4fe1\u606f",bordered:!1,style:{width:"100%"}},o.default.createElement("div",null,o.default.createElement(i.FormItem,{queryCondition:e,onSave:this.onSave}))))}}var c=e=>{var a=e.addFarm,t=e.loading;return{addFarm:a,loading:t}},p=e=>{return{actions:{updateFarms(a){e({type:"addFarm/updateFarms",payload:a})},getFarms(a){e({type:"addFarm/getFarmer",payload:a})},saveFarms(a){e({type:"addFarm/saveFarm",payload:a})}}}},h=(0,l.connect)(c,p)(u);a.default=h}}]);