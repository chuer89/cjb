(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{"+tOa":function(e,t,r){e.exports={error:"error___3Q8CJ",treeListLeft:"treeListLeft___15BPW",errText:"errText___3HjCI",treeContainer:"treeContainer___2FWH1",treeList:"treeList___3UpJ0",treeListRight:"treeListRight___2JfBO",title:"title___1yrtQ",btnContanter:"btnContanter___PnE2l",btnLeft:"btnLeft___322rO",btnRight:"btnRight___3jKnA",activeContainer:"activeContainer___3R91p"}},"3yyK":function(e,t,r){"use strict";var a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("2qtc");var l=a(r("kLXV")),n=a(r("MVZn")),i=a(r("q1tI")),o=r("MuoO"),s=r("Kvkj"),c=a(r("LvDl")),u={lineHeight:"28px"},d={width:"200px"},f=e=>{var t=e.dispatch,r=e.createAccount,a=r.modalShow,o=r.formData,f=e=>{var t=e.length,r=3,a=Math.ceil(t/r),l=new Array(a).fill(""),n=[];return l.reduce(e=>{return e.push(parseInt(e[e.length-1],10)+parseInt(r,10)),e},[0]).reduce((t,r)=>{return n.push(e.slice(t,r)),r},0),n},h=e=>{var t=[],r={realName:"\u59d3\u540d",mobile:"\u7535\u8bdd",email:"\u90ae\u7bb1",roles:"\u6743\u9650"};return c.default.forIn(e,(r,a)=>{"mobileRegion"!==a&&("mobile"===a&&(r="+"+e.mobileRegion+"-"+e.mobile),t.push({value:r,key:a}))}),t.map((e,t)=>{return i.default.createElement("div",{key:`modal-list${t}`},i.default.createElement(s.FilterItem,{label:r[e.key],labelType:"flexEnd"},i.default.createElement("div",{style:d},"roles"===e.key?i.default.createElement("div",{style:u},f(e.value.map(e=>e.title)).map((e,t)=>i.default.createElement("div",{key:t},e.join("/")))):i.default.createElement("span",{style:u},e.value))))})};return i.default.createElement(l.default,{title:"\u786e\u8ba4\u65b0\u8d26\u53f7\u4fe1\u606f",visible:a,bodyStyle:{padding:"32px 120px"},onOk:()=>{t({type:"createAccount/createAccount",payload:(0,n.default)({},o,{roles:o.roles.map(e=>e.key).toString(),mobileRegion:o.mobileRegion.replace("+","")})})},onCancel:()=>{t({type:"createAccount/setModalHide"})}},h(o))},h=(0,o.connect)(e=>{var t=e.createAccount,r=e.loading;return{createAccount:t,loading:r}})(f);t.default=h},DwXu:function(e,t,r){"use strict";var a=r("284h"),l=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("y8nQ");var n=l(r("Vl3Y"));r("miYZ");var i=l(r("tsqr")),o=l(r("MVZn")),s=a(r("q1tI")),c=(l(r("17x9")),r("MuoO")),u=l(r("p5N4")),d=l(r("3yyK")),f=r("Kvkj"),h=l(r("LvDl")),p=r("7Qib"),m=l(r("usdK"));class y extends s.Component{constructor(){super(...arguments),this.state={selectCountryNo:"86"},this.onChangeCountryNo=((e,t)=>{this.setState({selectCountryNo:e},t)})}UNSAFE_componentWillMount(){this.props.dispatch({type:"createAccount/initState"})}render(){var e=this.props,t=e.dispatch,r=e.createAccount.authorityIsOk,a=e.form,l=a.getFieldDecorator,c=a.validateFields,y=a.getFieldsValue,g=a.setFieldsValue,v=this.state.selectCountryNo,k=this.onChangeCountryNo,C="@worldfarm.com",S=e=>{var t=[];e.forEach(e=>{e.pkey&&t.push(e.pkey)});var r=e.filter(e=>{return!t.includes(e.key)});l("roles",{initialValue:r,rules:[{required:!0}]}),g({roles:r})},b=[{inputType:"input",title:"realName",label:"\u59d3\u540d",itemConfig:{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d\uff01"}]},componentsConfig:{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d",maxLength:64,style:{width:300}},ColConfig:{span:24}},{inputType:"countryPhone",title:"mobile",label:"\u624b\u673a",itemConfig:{initialValue:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",pattern:p.reg.phone,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"}]},componentsConfig:{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",style:{width:300},maxLength:20},regionConfig:{initialValue:v,onChange(e){k(e,()=>{c("mobile",{first:!0,firstFields:"mobile",force:!0},e=>{console.log(e)})})}},ColConfig:{span:24}},{inputType:"email",emailAfter:C,title:"email",label:"\u90ae\u7bb1",itemConfig:{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1\uff01"}]},componentsConfig:{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1\uff01",maxLength:64,style:{width:300}},ColConfig:{span:24}},{inputType:"custom",title:"rolesCustom",label:"\u6743\u9650\u8bbe\u7f6e",ColConfig:{span:24},render:s.default.createElement(u.default,{onChange:S})}],A=e=>{l("mobileRegion",{initialValue:v,rules:[{required:!0}]}),g({mobileRegion:v});var a=(0,o.default)({},y()),n=(0,o.default)({},a,e);if(n.email+=C,delete n.mobileRegionPrefix,delete n.rolesCustom,h.default.isEmpty(n.roles))return i.default.error("\u8bf7\u9009\u62e9\u6743\u9650"),!1;r&&t({type:"createAccount/updateState",payload:{formData:n,modalShow:!0}})};return s.default.createElement(n.default,{layout:"horizontal"},s.default.createElement("h1",null,"\u65b0\u589e\u8d26\u53f7"),s.default.createElement(f.FormItem,{queryCondition:b,onSave:A,onCancel:()=>{m.default.push("/users/internal")},containerStyle:{background:"white"}}),s.default.createElement(d.default,null))}}var g=(0,c.connect)(e=>{var t=e.createAccount,r=e.loading;return{createAccount:t,loading:r}})(n.default.create()(y));t.default=g},p5N4:function(e,t,r){"use strict";var a=r("284h"),l=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("14J3");var n=l(r("BMrR"));r("T2oS");var i=l(r("W9HT"));r("+L6B");var o=l(r("2/Rp"));r("jCWc");var s=l(r("kPKH"));r("ozfa");var c=l(r("MJZm")),u=a(r("q1tI")),d=r("MuoO"),f=(l(r("17x9")),l(r("LvDl"))),h=r("7Qib"),p=l(r("+tOa")),m=c.default.TreeNode,y=(e,t)=>{return e.map(e=>{return e?e.children?u.default.createElement(m,{title:e.title,key:e.key,dataRef:e},y(e.children,t)):u.default.createElement(m,e):null})},g=e=>{var t=[],r=(e,a)=>{e.forEach(e=>{e.children&&r(e.children,e.key),t.push({pkey:a,title:e.title,key:e.key})})};return r(e,null),t},v=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=[],l=[],n=[],i=t.filter(t=>{return!!e.includes(t.key+"")&&(s(t),!0)});function o(e){return t.filter(t=>{return t.key===e&&(n.push(t),!0)})[0]}function s(e){if(e.pkey){l.push(e.pkey);var t=o(e.pkey);s(t)}}return r?f.default.uniq(a.concat(i,n)):f.default.uniq(i)},k=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=`${r}Tree${f.default.random(0,100)}`;return a===t?e(a):a};class C extends u.Component{constructor(e){super(e),this.soloArr=(()=>{return g(this.props.createAccount.treeData)}),this.errorTest=(()=>{var e=Array.from(this.state.currentSelect),t=!1,r=!1,a="\u8bf7\u9009\u62e9\u6743\u9650",l="10",n="20",i="80";e.includes(l)&&(t=!e.includes(n),t&&(a="\u9009\u62e9\u5730\u63a8\u6743\u9650\u540e\uff0c\u5fc5\u987b\u9009\u62e9\u5ba2\u670d\u6743\u9650\uff01")),e.includes(i)&&(e.includes(n)||e.includes(l))&&(r=!0,a='"\u755c\u7267\u5ba2\u670d"\u4e0d\u80fd\u540c"\u5730\u63a8"\u548c"\u5ba2\u670d"\u540c\u65f6\u5b58\u5728\uff01');var o=!this.state.targetData.length&&(this.props.createAccount.clickSumbit||this.state.hasAction);return{error:o||t||r,msg:a}}),this.setAuthority=(()=>{this.props.dispatch({type:"createAccount/setAuthority",payload:{authorityIsOk:!this.errorTest().error}})}),this.onLeft=(()=>{var e=this.state.currentSelect,t=Array.from(this.state.rightSelected);t.forEach(t=>{e.add(t)});var r=(0,h.arrayToTree)(v(Array.from(e),this.soloArr()),"key","pkey");this.setCurrentSelect(r,e)}),this.onRight=(()=>{var e=f.default.difference(Array.from(this.state.currentSelect),Array.from(this.state.leftSelected)),t=(0,h.arrayToTree)(v(e,this.soloArr()),"key","pkey");this.setCurrentSelect(t,e)}),this.setCurrentSelect=((e,t)=>{this.setState({rightkey:k(this.state.leftkey,"right"),leftkey:k(this.state.leftkey,"left"),targetData:e,rightSelected:new Set,leftSelected:new Set,currentSelect:new Set(t),hasAction:!0},()=>{this.props.onChange(v(Array.from(this.state.currentSelect),this.soloArr(),!1)),this.setAuthority()})}),this.onSelect=((e,t)=>{"right"===t?this.setState({rightSelected:e}):this.setState({leftSelected:e})}),this.state={rightSelected:new Set,leftSelected:new Set,currentSelect:new Set,targetData:[],leftkey:k("","left"),rightkey:k("","right"),hasAction:!1}}render(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.loading,r=this.props.createAccount.treeData,a=this.state.targetData,l=a.length,d=r.length,f=this.errorTest();return u.default.createElement("div",{className:p.default.treeContainer},u.default.createElement(n.default,{type:"flex",className:f.error?p.default.error:""},u.default.createElement(s.default,null,u.default.createElement("p",{className:p.default.title},"\u5f53\u524d\u89d2\u8272\u53ca\u6743\u9650"),l?u.default.createElement(c.default,{checkable:!0,defaultExpandAll:!0,onCheck:e=>{this.onSelect(e,"left")},key:this.state.leftkey,className:p.default.treeListLeft},y(a,"left")):u.default.createElement("div",{className:p.default.treeListLeft})),u.default.createElement(s.default,{className:p.default.activeContainer},u.default.createElement(o.default,{className:"tree-btn",onClick:this.onLeft,shape:"circle",icon:"left"}),u.default.createElement(o.default,{className:"tree-btn",onClick:this.onRight,shape:"circle",icon:"right"})),u.default.createElement(s.default,null,u.default.createElement("p",{className:p.default.title},"\u53ef\u9009\u89d2\u8272\u53ca\u6743\u9650"),d?u.default.createElement(c.default,{checkable:!0,defaultExpandAll:!0,key:this.state.rightkey,className:p.default.treeListRight,onCheck:e=>{this.onSelect(e,"right")}},y(r,"right")):u.default.createElement(i.default,{spinning:t.effects["createAccount/getTreeSelectData"],delay:500}))),f.error?u.default.createElement("span",{className:p.default.errText},f.msg):"")}}var S=(0,d.connect)(e=>{var t=e.createAccount,r=e.loading;return{createAccount:t,loading:r}})(C);t.default=S}}]);