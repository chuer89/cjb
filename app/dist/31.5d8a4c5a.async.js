(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{lci7:function(e,a,t){"use strict";var n=t("TqRt");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("sPJy");var d=n(t("bE4q"));t("miYZ");var r=n(t("tsqr")),s=n(t("lwsE")),u=n(t("W8MJ")),l=n(t("a1gu")),i=n(t("Nsbk")),o=n(t("7W2i"));t("Znn+");var f=n(t("ZTPi")),c=n(t("q1tI")),p=t("MuoO"),v=n(t("mOP9")),m=n(t("LvDl")),y=n(t("3eXy")),h=n(t("usdK")),b=n(t("w1JU")),g=n(t("wCiI")),k=n(t("FPa0")),D=n(t("uSOS")),E=n(t("eu3l")),U=f.default.TabPane,I=function(e){function a(e){var t;return(0,s.default)(this,a),t=(0,l.default)(this,(0,i.default)(a).call(this,e)),t.state={isInitCheck:!0},t}return(0,o.default)(a,e),(0,u.default)(a,[{key:"onSave",value:function(e){this.handerAjaxSave(e,function(){r.default.success("\u5458\u5de5\u4fee\u6539\u6210\u529f"),h.default.push({pathname:"/personnel/record"})})}},{key:"handerAjaxSave",value:function(e,a){var t=this.props.editUser.uid;m.default.assign(e,{id:t}),y.default.updateUser(e).then(function(e){var t=e.data;"success"===t.msg?m.default.isFunction(a)&&a():r.default.error(t.msg)})}},{key:"handerAddUserWork",value:function(e,a){var t=this.props.editUser.uid;m.default.forEach(e,function(e){e.uid=t}),y.default.addUserWork({jsondata:JSON.stringify(e)}).then(function(e){var t=e.data;"success"===t.msg?m.default.isFunction(a)&&a():r.default.error(t.msg)})}},{key:"render",value:function(){var e=this.props,a=e.editUser,t=e.dispatch,n=e.app,s=e.user,u=a.personalDisabled,l=a.basicDisabled,i=a.experienceDisabled,o=a.twoDepartmentData,p=a.portrayalDisabled,I=a.activeTabsKey,S=a.userParam,x=a.uid,T=a.positionData,w=a.userMaster,P=a.userWork,N=a.userDetails,W=a.portrayalImg,K=a.departmentType,C=n.defaultImg,J=s.userInfo.token,A=this,M=this.state.isInitCheck,O=function(e){t({type:"editUser/save",payload:{activeTabsKey:e}})};if(M){var j=N.orgId;K="1",j&&(K="2")}var q={departmentType:K,userDetails:N,handerChange:function(e){A.setState({isInitCheck:!1}),t({type:"editUser/save",payload:{departmentType:e}})},handerSave:function(e){var a=e.storeId;m.default.assign(S,e),a&&m.default.assign(S,{orgId:""}),A.onSave(S)},handerNext:function(e){var a=e.storeId;m.default.extend(S,e),t({type:"editUser/save",payload:{personalDisabled:!1,activeTabsKey:"1",userParam:S}}),a&&m.default.assign(S,{orgId:""}),"1"===K&&a&&(t({type:"editUser/getPosition"}),t({type:"editUser/getTwoDepartmentBySid",payload:{sid:a}}))}},B={userDetails:N,userMaster:w,handerSave:function(e){A.onSave(e)},handerNext:function(e){m.default.extend(S,e),t({type:"editUser/save",payload:{activeTabsKey:"2",userParam:S,basicDisabled:!1}})}},F={userDetails:N,positionData:T,userMaster:w,twoDepartmentData:o,handerSave:function(e){m.default.assign(S,e,{contractDate:"",id:x}),A.onSave(S)},handerNext:function(e){m.default.assign(S,e,{contractDate:"",id:x}),A.handerAjaxSave(S,function(){t({type:"editUser/save",payload:{experienceDisabled:!1,activeTabsKey:"3"}})})}},Z={userWork:P,handerSave:function(e){A.handerAddUserWork(e,function(){h.default.push({pathname:"/personnel/record"})})},handerNext:function(e){A.handerAddUserWork(e,function(){t({type:"editUser/save",payload:{portrayalDisabled:!1,activeTabsKey:"4"}})})},handerDel:function(e){y.default.deleteUserWorkById({ids:JSON.stringify([e])}).then(function(e){var a=e.data;"success"===a.msg||r.default.error(a.msg)})}},_={action:y.default.addImg+"?token="+J,defaultImg:C,portrayalImg:W,handerNext:function(e){m.default.extend(e,{uid:x}),y.default.addUserPortrayal(e).then(function(e){var a=e.data;"success"===a.msg?(r.default.success("\u5458\u5de5\u4fee\u6539\u6210\u529f"),h.default.push({pathname:"/personnel/record"})):r.default.error(a.msg)})}};return c.default.createElement("div",null,c.default.createElement("div",{style:{paddingBottom:"12px"}},c.default.createElement(d.default,null,c.default.createElement(d.default.Item,null,c.default.createElement(v.default,{to:"/personnel/record"},"\u5458\u5de5\u6863\u6848")),c.default.createElement(d.default.Item,null,"\u7f16\u8f91\u7528\u6237"))),c.default.createElement("div",{className:"contentBox"},c.default.createElement(f.default,{activeKey:I,tabPosition:"top",onChange:O},c.default.createElement(U,{tab:"\u5f52\u5c5e\u90e8\u95e8",key:"0"},c.default.createElement(b.default,q)),c.default.createElement(U,{tab:"\u4e2a\u4eba\u4fe1\u606f",disabled:u,key:"1"},c.default.createElement(g.default,B)),c.default.createElement(U,{tab:"\u57fa\u672c\u4fe1\u606f",disabled:l,key:"2"},c.default.createElement(k.default,F)),c.default.createElement(U,{tab:"\u5de5\u4f5c\u7ecf\u5386",disabled:i,key:"3"},c.default.createElement(D.default,Z)),c.default.createElement(U,{tab:"\u5458\u5de5\u753b\u50cf",disabled:p,key:"4"},c.default.createElement(E.default,_)))))}}]),a}(c.default.Component),S=(0,p.connect)(function(e){var a=e.editUser,t=e.app,n=e.user;return{editUser:a,app:t,user:n}})(I);a.default=S}}]);