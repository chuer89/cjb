(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{P7O7:function(e,t,a){e.exports={"text-overflow":"text-overflow___1gYPN",clearfix:"clearfix___3poi1",fl:"fl___2asEV",fr:"fr___3lJsU",titleBox:"titleBox___i-ZWk",submitBtnBox:"submitBtnBox___1uqZ7",addBox:"addBox___27PDD"}},"uzl/":function(e,t,a){"use strict";var l=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("sPJy");var r=l(a("bE4q"));a("+L6B");var u=l(a("2/Rp"));a("DZo9");var d=l(a("8z0m"));a("Pwec");var n=l(a("CtXQ")),s=l(a("pVnL"));a("miYZ");var f=l(a("tsqr"));a("5NDa");var o=l(a("5rEg"));a("OaEy");var i=l(a("2fM7"));a("y8nQ");var m=l(a("Vl3Y")),c=l(a("q1tI")),p=l(a("P7O7")),g=l(a("mOP9")),v=l(a("LvDl")),E=l(a("3eXy")),h=l(a("usdK")),_=a("MuoO"),x=m.default.Item,y=i.default.Option,w=o.default.TextArea;class b extends c.default.Component{constructor(){super(...arguments),this.state={tag:[{name:"\u81ea\u5b9a\u4e49",code:-1}],tagValue:""},this.normFile=(e=>{return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList})}UNSAFE_componentWillMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}save(e){this._isMounted&&this.setState(e)}render(){var e=this.state,t=(e.tag,e.tagValue),a=this.props,l=a.form,r=a.handerAdd,h=a.tagTypeData,_=a.token,b=l.getFieldDecorator,B=this,D=e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{if(!e){var a=[],l={},u=t.tags;if(v.default.forEach(t.fileFile,e=>{var t=e.response,l=v.default.get(t,"data.id");l&&a.push(l)}),"-1"===t.tags&&(u=t.tagOwn),v.default.extend(l,t,{fileId:a.join(","),fileFile:"",tag:u,tags:"",tagOwn:""}),v.default.isEmpty(a))return f.default.error("\u4e0a\u4f20\u6587\u4ef6\u65e0\u6cd5\u6b63\u5e38\u8bfb\u53d6\uff0c\u8bf7\u5237\u65b0\u518d\u8bd5"),!1;r(l)}})},q={labelCol:{sm:{span:6}},wrapperCol:{sm:{span:15}}},N=e=>{B.save({tagValue:v.default.toString(e)})},O="";v.default.isArray(h)&&(O=h.map((e,t)=>{var a="-1",l="\u81ea\u5b9a\u4e49";return e.code&&(l=e.name,a=e.name),c.default.createElement(y,{key:a},l)}));var F="";"-1"===t&&(F=c.default.createElement(x,(0,s.default)({},q,{label:"\u81ea\u5b9a\u4e49\u8bfe\u7a0b\u4f53\u7cfb"}),b("tagOwn",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bfe\u7a0b\u4f53\u7cfb"}]})(c.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u8bfe\u7a0b\u4f53\u7cfb",autoComplete:"off",maxLength:"32"}))));var L={name:"file",multiple:!0,action:E.default.addImg+"?token="+_,data:{type:6},accept:".ppt,.pptx,.mp4,.flv.avi"};return c.default.createElement("div",null,c.default.createElement("div",null,c.default.createElement(m.default,{onSubmit:D},c.default.createElement(x,(0,s.default)({},q,{label:"\u8bfe\u7a0b\u4f53\u7cfb"}),b("tags",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8bfe\u7a0b\u4f53\u7cfb"}]})(c.default.createElement(i.default,{allowClear:!0,style:{width:320},placeholder:"\u8bf7\u9009\u62e9\u8bfe\u7a0b\u4f53\u7cfb",onChange:N},O))),F,c.default.createElement(x,(0,s.default)({},q,{label:"\u8bfe\u7a0b\u8bb2\u5e08"}),b("teacher",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bfe\u7a0b\u8bb2\u5e08"}]})(c.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u8bfe\u7a0b\u8bb2\u5e08",autoComplete:"off",maxLength:"32",style:{width:320}}))),c.default.createElement(x,(0,s.default)({},q,{label:"\u8d44\u6599\u4e0a\u4f20"}),b("fileFile",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u8d44\u6599"}],getValueFromEvent:B.normFile,valuePropName:"fileList"})(c.default.createElement(d.default.Dragger,L,c.default.createElement("p",{className:"ant-upload-drag-icon"},c.default.createElement(n.default,{type:"inbox"})),c.default.createElement("p",{className:"ant-upload-text"},"\u5355\u51fb\u6216\u62d6\u52a8\u6587\u4ef6\u5230\u8be5\u533a\u57df\u4e0a\u4f20"),c.default.createElement("p",{className:"ant-upload-hint"},"\u652f\u6301\u5355\u4e2a\u6216\u6279\u91cf\u4e0a\u4f20")))),c.default.createElement(x,(0,s.default)({},q,{label:"\u8bfe\u7a0b\u63cf\u8ff0"}),b("desc",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bfe\u7a0b\u63cf\u8ff0",min:5,message:"\u8bf7\u81f3\u5c11\u8f93\u51655\u4e2a\u5b57\u7b26"}]})(c.default.createElement(w,{rows:4,maxLength:300,placeholder:"\u8bf7\u81f3\u5c11\u8f93\u51655\u4e2a\u5b57\u7b26",style:{width:420}}))),c.default.createElement("div",{className:p.default.submitBtnBox},c.default.createElement(u.default,{type:"primary",htmlType:"submit",size:"large",style:{marginRight:"24px"}},"\u6dfb\u52a0"),c.default.createElement(g.default,{to:"/course/management"},c.default.createElement(u.default,{size:"large"},"\u53d6\u6d88"))))))}}var B=m.default.create()(b),D=e=>{e.dispatch;var t=e.course,a=e.user,l=t.tagTypeData,u=a.userInfo.token,d="/course/management",n=e=>{E.default.addTrainLibrary(e).then(e=>{var t=e.data;"success"===t.msg?(f.default.success("\u4e0a\u4f20\u6210\u529f"),h.default.push({pathname:d})):f.default.error(t.msg)})},s={tagTypeData:l,handerAdd:n,token:u};return c.default.createElement("div",null,c.default.createElement("div",{style:{paddingBottom:"12px"}},c.default.createElement(r.default,null,c.default.createElement(r.default.Item,null,c.default.createElement(g.default,{to:d},"\u8bfe\u7a0b\u7ba1\u7406")),c.default.createElement(r.default.Item,null,"\u8bfe\u7a0b\u6dfb\u52a0"))),c.default.createElement("div",{className:p.default.addBox},c.default.createElement("div",{className:p.default.titleBox},"\u6dfb\u52a0\u8bfe\u7a0b"),c.default.createElement(B,s)))},q=(0,_.connect)(e=>{var t=e.course,a=e.user;return{course:t,user:a}})(D);t.default=q}}]);