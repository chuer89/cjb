(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"0AwI":function(e,t,a){"use strict";var l=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("7Kak");var r=l(a("9yH6")),u=l(a("pVnL")),d=l(a("lwsE")),c=l(a("W8MJ")),o=l(a("a1gu")),s=l(a("Nsbk")),f=l(a("7W2i"));a("OaEy");var i=l(a("2fM7"));a("y8nQ");var p=l(a("Vl3Y")),m=l(a("q1tI")),v=l(a("IOgL")),y=a("Itv/"),E=l(a("LvDl")),h=p.default.Item,g=i.default.Option,_=function(e){function t(){var e,a;(0,d.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,o.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(n))),a.state={education:y.educationMap,rankType:y.rankTypeMap,contractType:y.contractTypeMap},a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,l=e.callBack,d=e.form,c=d.getFieldDecorator,o=d.validateFields,s=e.structure,f=e.userType,p=this.state,y=p.education,_=p.rankType,k=p.contractType,x={labelCol:{sm:{span:6}},wrapperCol:{sm:{span:15}}},w=function(e){e.preventDefault(),o(function(e,t){if(!e){var a=t.guishu,n="",r="",u="";E.default.isArray(a)&&(u=E.default.last(E.default.last(a).split(".")),"2"===a[0]?r=u:n=u,E.default.assign(t,{orgId:r,storeId:n})),delete t.guishu,l(t)}})},T={structure:s,userType:f,onChange:function(){},getPopupContainerId:"js_sele_designate_department",cascaderConfig:{changeOnSelect:!1}},I=y.map(function(e){return m.default.createElement(g,{value:e.code,key:e.code},e.value)}),B=_.map(function(e){return m.default.createElement(g,{value:e.code,key:e.code},e.value)}),b=k.map(function(e){return m.default.createElement(g,{value:e.code,key:e.code},e.value)});return m.default.createElement(n.default,{title:"\u6279\u91cf\u4fee\u6539\u8d44\u6599",width:800,destroyOnClose:!0,visible:t,centered:!0,onOk:w,onCancel:a},m.default.createElement("div",null,m.default.createElement("div",{id:"js_sele_designate_department"}),m.default.createElement("form",null,m.default.createElement(h,(0,u.default)({},x,{label:"\u5458\u5de5\u5f52\u5c5e"}),c("guishu")(m.default.createElement(v.default,T))),m.default.createElement(h,(0,u.default)({},x,{label:"\u7528\u6237\u6027\u522b"}),c("gender")(m.default.createElement(r.default.Group,null,m.default.createElement(r.default,{value:"1"},"\u7537"),m.default.createElement(r.default,{value:"2"},"\u5973")))),m.default.createElement(h,(0,u.default)({},x,{label:"\u5b66\u5386"}),c("education")(m.default.createElement(i.default,{style:{width:120}},I))),m.default.createElement(h,(0,u.default)({},x,{label:"\u804c\u7ea7"}),c("type")(m.default.createElement(i.default,{style:{width:120}},B))),m.default.createElement(h,(0,u.default)({},x,{label:"\u5408\u540c\u7c7b\u578b"}),c("contractType")(m.default.createElement(i.default,{style:{width:120}},b))))))}}]),t}(m.default.Component),k=p.default.create()(_);t.default=k},"Ldz/":function(e,t,a){"use strict";var l=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var n=l(a("wCAj"));a("5NDa");var r=l(a("5rEg"));a("/zsF");var u=l(a("PArb")),d=l(a("lwsE")),c=l(a("W8MJ")),o=l(a("a1gu")),s=l(a("Nsbk")),f=l(a("7W2i"));a("+L6B");var i=l(a("2/Rp"));a("miYZ");var p=l(a("tsqr"));a("2qtc");var m=l(a("kLXV"));a("OaEy");var v=l(a("2fM7")),y=l(a("q1tI")),E=a("MuoO"),h=l(a("iH12")),g=l(a("mOP9")),_=l(a("LvDl")),k=l(a("wd/R")),x=l(a("3eXy")),w=a("0fvF"),T=l(a("0AwI")),I=v.default.Option,B=m.default.confirm,b=function(e){var t=e.addFile,a=e.token,l=x.default.importUser+"?token="+a,n=function(){location.reload()};return y.default.createElement(w.Uploader,{request:{fileName:"file",url:l,method:"POST",withCredentials:!1},onError:function(e){e.error;m.default.error({title:"\u670d\u52a1\u5668\u6709\u8bef",content:"\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002",onOk:n})},onComplete:function(e){var a=e.response,l=a.msg,r=a.data;"success"===l?(p.default.success("\u5bfc\u5165\u6210\u529f"),t(r)):m.default.error({title:"\u5bfc\u5165\u5931\u8d25",content:l,onOk:n})},uploadOnSelection:!0},function(e){var t=e.onFiles,a=e.progress,l=e.complete,n=!1;return a&&!l&&(n=!0),y.default.createElement(w.UploadField,{onFiles:function(e){_.default.isEmpty(e)||(e[0].size<5242880?t(e):p.default.error("\u6587\u4ef6\u6700\u59275M\uff0c\u8bf7\u538b\u7f29\u6587\u4ef6\u5927\u5c0f"))},uploadProps:{accept:".xlsx,.xls,.xlt"}},y.default.createElement(i.default,{loading:n,type:"primary",icon:"usergroup-add"},"\u6279\u91cf\u5bfc\u5165"))})},N=function(e){function t(e){var a;return(0,d.default)(this,t),a=(0,o.default)(this,(0,s.default)(t).call(this,e)),a.state={statusDataSele:{},contractTypeSele:{},warningSele:{0:"\u6b63\u5e38",1:"\u8eab\u4efd\u8bc1",2:"\u5065\u5eb7\u8bc1",3:"\u52b3\u52a8\u5408\u540c"},columns:[]},a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"UNSAFE_componentWillMount",value:function(){this._isMounted=!0;var e=this.props.record,t=e.statusData,a=e.contractType,l=(this.state.warningSele,this),n={};_.default.forEach(t,function(e){n[""+e.code]=e.value});var r={};_.default.forEach(a,function(e){r[""+e.code]=e.value});var u=[{title:"\u5de5\u53f7",dataIndex:"code"},{title:"\u59d3\u540d",dataIndex:"name"},{title:"\u72b6\u6001",dataIndex:"status",render:function(e){return y.default.createElement("div",null,n[e]||"")}},{title:"\u5408\u4f5c\u7c7b\u578b",dataIndex:"contractType",render:function(e){return y.default.createElement("div",null,r[e]||"")}},{title:"\u5de5\u4f5c\u5e74\u9650",dataIndex:"workAge"},{title:"\u5165\u804c\u65f6\u95f4",dataIndex:"joinTime",render:function(e){return y.default.createElement("div",null,(0,k.default)(e).format("YYYY-MM-DD"))}},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"phone"},{title:"\u64cd\u4f5c",key:"handle",align:"center",render:function(e){return l.operateRender(e)}}];this.setState({columns:u,statusDataSele:n,contractTypeSele:r})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"save",value:function(e){this._isMounted&&this.setState(e)}},{key:"operateRender",value:function(e){var t=this,a=this.props.dispatch,l=function(){t.handerDel(function(){x.default.deleteUserById({id:e.id}).then(function(e){var t=e.data;"success"===t.msg?(p.default.success("\u5220\u9664\u6210\u529f"),a({type:"record/getUserList",payload:{page:1}})):p.default.error(t.msg)})})};return y.default.createElement("div",null,y.default.createElement(g.default,{to:"/personnel/record/editUser/"+e.id,target:"_blank",className:h.default.operateBtn},"\u7f16\u8f91"),y.default.createElement(u.default,{type:"vertical"}),y.default.createElement("span",{className:h.default.operateBtn,onClick:l},"\u5220\u9664"),y.default.createElement(u.default,{type:"vertical"}),y.default.createElement(g.default,{target:"_blank",to:"/personnel/record/userdetails/"+e.id,className:h.default.operateBtn},"\u8be6\u60c5"))}},{key:"handerDel",value:function(e){B({title:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){e()},onCancel:function(){}})}},{key:"render",value:function(){var e=this.props,t=e.record,a=e.user,l=e.dispatch,u=e.structure,d=t.dataBody,c=t.statusData,o=t.contractType,s=t.warningData,f=t.searchParam,m=t.pageSize,E=t.firstPage,k=t.selectedRowUserId,w=t.visibleBatch,B=a.dept,N=a.userInfo,C=N.token,U=N.userType,O={width:"180px"},S=this.state.columns,M=d.records,L=d.total,D=L<=0,P=_.default.isEmpty(k),q=function(){l({type:"record/getUserList",payload:{page:E}})},A=function(e,t){f[e]=t,l({type:"record/save",payload:{searchParam:f}})},F=function(){l({type:"record/save",payload:{searchParam:{}}}),l({type:"record/getUserList",payload:{page:E}})},R=c.map(function(e){return y.default.createElement(I,{value:e.code,key:e.code},e.value)}),Y=o.map(function(e){return y.default.createElement(I,{value:e.code,key:e.code},e.value)}),j=s.map(function(e){return y.default.createElement(I,{value:e.code,key:e.code},e.value)}),V={onChange:function(e,t){l({type:"record/save",payload:{selectedRowUserId:e}})}},J={rowKey:"id",dataSource:M||[],columns:S,locale:{emptyText:"\u6682\u65e0\u6570\u636e"},rowSelection:V,pagination:{pageSize:m,total:L},onChange:function(e){var t=e.current;l({type:"record/getUserList",payload:{page:t}})}},W={token:C,addFile:function(){l({type:"record/getUserList",payload:{page:E}})}},z="".concat(x.default.exportUser,"?token=").concat(C,"&type=1&dept=").concat(B),H="".concat(x.default.exportUser,"?token=").concat(C,"&type=2"),K={visible:w,structure:u,userType:U,onCancel:function(){l({type:"record/save",payload:{visibleBatch:!1}})},callBack:function(e){var t=JSON.stringify(e);if(_.default.isEmpty(JSON.parse(t)))return p.default.error("\u8bf7\u9009\u62e9\u8981\u4fee\u6539\u7684\u503c"),!1;var a={change:t,userid:k.join(",")};l({type:"record/updateAll",payload:a})}},X=function(){l({type:"record/save",payload:{visibleBatch:!0}})};return y.default.createElement("div",null,y.default.createElement("div",null,y.default.createElement(T.default,K)),y.default.createElement("div",{className:h.default.content},y.default.createElement("div",{className:h.default.operateTopBox},y.default.createElement(g.default,{to:"/personnel/record/addUser",target:"_blank",className:h.default.operateTopBtn},y.default.createElement(i.default,{type:"primary",icon:"user-add"},"\u6dfb\u52a0\u5458\u5de5")),y.default.createElement("span",{className:h.default.operateTopBtn},y.default.createElement(i.default,{onClick:X,type:"primary",disabled:P,icon:"edit"},"\u6279\u91cf\u4fee\u6539")),y.default.createElement("a",{href:z,className:h.default.operateTopBtn,target:"_blank"},y.default.createElement(i.default,{disabled:D,type:"primary",icon:"export"},"\u5bfc\u51fa")),y.default.createElement("span",{className:h.default.operateTopBtn},y.default.createElement(b,W)),y.default.createElement("a",{href:H,className:h.default.operateTopBtn,target:"_blank"},y.default.createElement(i.default,{type:"primary",icon:"save",className:h.default.operateTopBtn},"\u6a21\u7248\u4e0b\u8f7d"))),y.default.createElement("div",{className:h.default.searchBox},y.default.createElement("div",{className:"clearfix"},y.default.createElement("div",{className:h.default.searchItem},y.default.createElement("span",null,"\u5de5\u53f7\uff1a"),y.default.createElement(r.default,{value:f.code,onChange:function(e){A("code",e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5de5\u53f7",maxLength:32,style:O})),y.default.createElement("div",{className:h.default.searchItem},y.default.createElement("span",null,"\u59d3\u540d\uff1a"),y.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d",value:f.name,onChange:function(e){A("name",e.target.value)},maxLength:32,style:O})),y.default.createElement("div",{className:h.default.searchItem},y.default.createElement("span",null,"\u72b6\u6001\uff1a"),y.default.createElement(v.default,{value:f.status||"",style:{width:120},onChange:function(e){A("status",e)}},R)),y.default.createElement("div",{className:h.default.searchItem},y.default.createElement("span",null,"\u5408\u540c\u7c7b\u578b\uff1a"),y.default.createElement(v.default,{value:f.contractType||"",style:{width:120},onChange:function(e){A("contractType",e)}},Y))),y.default.createElement("div",{className:h.default.searchItemBox+" clearfix"},y.default.createElement("div",{className:h.default.searchItem},y.default.createElement("span",null,"\u4fe1\u606f\u9884\u8b66\uff1a"),y.default.createElement(v.default,{value:f.warning||"",style:{width:120},onChange:function(e){A("warning",e)}},j)),y.default.createElement("div",{className:h.default.searchItem},y.default.createElement(i.default,{type:"primary",onClick:q,style:{marginRight:"15px"}},"\u67e5\u8be2"),y.default.createElement(i.default,{onClick:F},"\u91cd\u7f6e")))),y.default.createElement(n.default,J)))}}]),t}(y.default.Component),C=(0,E.connect)(function(e){var t=e.record,a=e.user,l=e.structure;return{record:t,user:a,structure:l}})(N);t.default=C},iH12:function(e,t,a){e.exports={"text-overflow":"text-overflow___3UwwD",clearfix:"clearfix___35ibu",fl:"fl___3VU3u",fr:"fr___31ruM",content:"content___x-8YP",searchBox:"searchBox___1cq8x",searchItem:"searchItem___1ASUI",searchItemBox:"searchItemBox___3qtI1",operateBtn:"operateBtn___2KsqV",operateTopBtn:"operateTopBtn___Ll0QR",operateTopBox:"operateTopBox___38gf9"}}}]);