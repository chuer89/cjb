(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{lci7:function(e,t,a){"use strict";var d=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("sPJy");var r=d(a("bE4q"));a("miYZ");var s=d(a("tsqr")),l=d(a("lwsE")),n=d(a("W8MJ")),u=d(a("a1gu")),i=d(a("Nsbk")),o=d(a("7W2i"));a("Znn+");var f=d(a("ZTPi")),c=d(a("q1tI")),p=a("MuoO"),y=d(a("mOP9")),m=d(a("LvDl")),v=d(a("3eXy")),b=d(a("usdK")),h=d(a("w1JU")),g=d(a("wCiI")),D=d(a("FPa0")),U=d(a("uSOS")),E=d(a("eu3l")),k=f.default.TabPane,I=function(e){function t(e){var a;return(0,l.default)(this,t),a=(0,u.default)(this,(0,i.default)(t).call(this,e)),a.state={isInitCheck:!0},a}return(0,o.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.editUser,a=e.dispatch,d=e.app,l=e.user,n=t.personalDisabled,u=t.basicDisabled,i=t.experienceDisabled,o=t.twoDepartmentData,p=t.portrayalDisabled,I=t.activeTabsKey,x=t.userParam,P=t.uid,T=t.positionData,w=t.userWork,N=t.userDetails,K=t.portrayalImg,C=t.departmentType,J=d.defaultImg,W=l.userInfo.token,B=this,O=this.state.isInitCheck,S=function(e){a({type:"editUser/save",payload:{activeTabsKey:e}})};if(O){var q=N.orgId;C="1",q&&(C="2")}var M={departmentType:C,userDetails:N,handerChange:function(e){B.setState({isInitCheck:!1}),a({type:"editUser/save",payload:{departmentType:e}})},handerNext:function(e){var t=e.storeId;m.default.extend(x,e),a({type:"editUser/save",payload:{personalDisabled:!1,activeTabsKey:"1",userParam:x}}),t&&m.default.assign(x,{orgId:""}),"1"===C&&t&&(a({type:"editUser/getPosition"}),a({type:"editUser/getTwoDepartmentBySid",payload:{sid:t}}))}},Z={userDetails:N,handerNext:function(e){m.default.extend(x,e),a({type:"editUser/save",payload:{activeTabsKey:"2",userParam:x,basicDisabled:!1}})}},j={userDetails:N,positionData:T,twoDepartmentData:o,handerNext:function(e){m.default.extend(x,e,{contractDate:"",id:P}),v.default.updateUser(x).then(function(e){var t=e.data;"success"===t.msg?(a({type:"editUser/save",payload:{experienceDisabled:!1,activeTabsKey:"3"}}),a({type:"editUser/getUserWorkByUid"})):s.default.error(t.msg)})}},_={userWork:w,handerNext:function(e){m.default.forEach(e,function(e){e.uid=P}),v.default.addUserWork({jsondata:JSON.stringify(e)}).then(function(e){var t=e.data;"success"===t.msg?(a({type:"editUser/save",payload:{portrayalDisabled:!1,activeTabsKey:"4"}}),a({type:"editUser/getUserPortrayalByUid"})):s.default.error(t.msg)})},handerDel:function(e){v.default.deleteUserWorkById({ids:JSON.stringify([e])}).then(function(e){var t=e.data;"success"===t.msg||s.default.error(t.msg)})}},F={action:v.default.addImg+"?token="+W,defaultImg:J,portrayalImg:K,handerNext:function(e){m.default.extend(e,{uid:P}),v.default.addUserPortrayal(e).then(function(e){var t=e.data;"success"===t.msg?(s.default.success("\u5458\u5de5\u4fee\u6539\u6210\u529f"),b.default.push({pathname:"/personnel/record"})):s.default.error(t.msg)})}};return c.default.createElement("div",null,c.default.createElement("div",{style:{paddingBottom:"12px"}},c.default.createElement(r.default,null,c.default.createElement(r.default.Item,null,c.default.createElement(y.default,{to:"/personnel/record"},"\u5458\u5de5\u6863\u6848")),c.default.createElement(r.default.Item,null,"\u7f16\u8f91\u7528\u6237"))),c.default.createElement("div",{className:"contentBox"},c.default.createElement(f.default,{activeKey:I,tabPosition:"left",onChange:S},c.default.createElement(k,{tab:"\u5f52\u5c5e\u90e8\u95e8",key:"0"},c.default.createElement(h.default,M)),c.default.createElement(k,{tab:"\u4e2a\u4eba\u4fe1\u606f",disabled:n,key:"1"},c.default.createElement(g.default,Z)),c.default.createElement(k,{tab:"\u57fa\u672c\u4fe1\u606f",disabled:u,key:"2"},c.default.createElement(D.default,j)),c.default.createElement(k,{tab:"\u5de5\u4f5c\u7ecf\u5386",disabled:i,key:"3"},c.default.createElement(U.default,_)),c.default.createElement(k,{tab:"\u5458\u5de5\u753b\u50cf",disabled:p,key:"4"},c.default.createElement(E.default,F)))))}}]),t}(c.default.Component),x=(0,p.connect)(function(e){var t=e.editUser,a=e.app,d=e.user;return{editUser:t,app:a,user:d}})(I);t.default=x}}]);